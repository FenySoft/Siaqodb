using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

using Sqo;
using Sqo.Attributes;
using Sqo.Exceptions;
using Sqo.Transactions;
using Microsoft.VisualStudio.TestTools.UnitTesting;

using TestSiaqodbAsync.Models;

namespace TestSiaqodbAsync
{
    [TestClass]
    public class TestMigration
    {
        string dbFolder = @"D:\morecraf\temp\SqoUnitTests\";
        public TestMigration()
        {
            Sqo.SiaqodbConfigurator.SetLicense(@"VpMKWZsHgtvrUfEPCu0WDGLk5nlVs2+5yN8youWUSixTKvmLnjsVUq9r9kdfFMuCMGtT9uyrBHNQAv+V2KkxOg==");
        }

        [TestMethod]
        public void TestMigrateAddressItems()
        {
            // setup
            Siaqodb db = new Siaqodb(dbFolder);
            //db.DropAllTypes();

            //ParentObject p = new ParentObject();
            //p.Name = "TestParent";
            //p.PropData = new PropertyADO();
            //p.PropData.Name = "TestChild";
            //p.PropData.Address = new AddressADO();
            //p.PropData.Address.Address1 = "Address1";
            //p.PropData.Address.Address2 = "Address2";
            //p.PropData.Address.AddressItems = new List<AddressItemADO>();
            //p.PropData.Address.AddressItems.Add(new AddressItemADO() { Prop1 = "Test1", Prop2 = "Test1p2" });
            //p.PropData.Address.AddressItems.Add(new AddressItemADO() { Prop1 = "Test2", Prop2 = "Test2p2" });
            //db.StoreObject(p);

            var allAddresses = db.LoadAll<AddressItemADO>();
            foreach(var address in allAddresses)
            {
                string c = address.NewStuff;

                /*address.Prop1 = @"79343793828796135095
67497926730512576661
73505792496593766304
14128932724004532043
24573107831972249913
03764344160008826328
03307317609499374184
44425254789724334515
20065228474927882176
08272532704056536641
89663007239758030647
76617487284625035064
82764660917862215072
49511575340125870598
77663467798075204072
68925666589669323107
79700525802687523600
75093628185622703810
96488593244940078424
88882303334738843379
18595601894346430801
00018975252246605958
51094607363823091679
66891125839626397332
88325564558173823326
96175342466474267004
73995997235309092098
21172675456961438763
84348135645744342543
55418121035731504385
65776854662826427583
90054435889654885247
64970533349105325191
59659063534130089349
38697491947461605926
94401852653493370052
03597879203104319132
39217362371532642428
65794396844786585700
73530762569821412145
61517012756286024324
88103266160284300637
19074883681355496738
96158031700997490589
02515493217653556683
95569438993128649768
39320576977045844328
73757968487358150352
21673023931018963178
09629457612516707532
41282962408115520641
08585889069043436074
23718106722886717338
28650267927208269982
27797076963412672020
74699848256810644922
24239596814794009870
12398440692836626464
00560078537641591546
15039983691999327597
03724803099997046549
12191885395042252446
50695323584899661592
51191670266227352007
90631782245118692835
35212438075037458879
24254356909850205428
27738246191853559020
68185046647950997789
70752337288456353907
47340600600346197292
27084125430475755787
46097607717140707942
24347733627285525249
17112257592403604850
95420501481633753794
19114109888683750917
61705739913007141096
07132434262005710237
46863532452193855961
35265517892794530792
28690965265049498937
73669681015432030477
02753600693252626071
84893105667436348110
64091366574807867215
20409625313049487442
56201735375544317227
07815018506609314335
24463692794840945511
58890140645126116553
09901703589915324319
90754653062690210740
57684919671435232942
11717598136026388424
03633924090012931779
79019534636619461635
63291376278821664308
41810317046360548206
96801077698768165244
94813743301892141961
40030023246473977007
83645062406805308289
99306956578619327832
31981246726851344532
05618332790667620420
03535246270915454600
87229782945801389654
12317404725114648461
01168102042047811479
45279817565450041689
96113654533644280941
91154250718937781473
62670002373163714053
83223006172076578438
19362595245485125305
81476449822908476021
30074536774440614237
18516534414330210105
39515788554216144697
03249173470176415616
02111626965571569835
87163840166686169220
46571707827563681490
02271989371608973862
71727427917465019118
85744545241124557822
66359300492238046351
68935313928795254555
79378205971149582020
57395959553920313118
41354765524514143403
28701332135280895371
64654469950425490044
55658090379674934066
46927954220520659517
88511576027004491650
56097925259336725433
06257982397598466505
78059725221093987898
07278862565810495482
87793116193520552813
80170006956982968282
63238435192672634634
56954756208251708980
39119874360374578893
56437148240994185884
67609312226419473308
81137078578384081810
18983248589048723241
25953257303849460198
83854733719153159933
62605723115670287354
26841516708618224208
99616068291457665455
34736256878825729701
31632661606716842127
01210682717123012130
69494152798607447844
72809478944994154108
19883257225218624123
12783517430989212403
18308322454809137794
31811850441063348619
33654431041458777259
75931597580403655435
09129363790059779268
77450664290221603443
68417176090923749251
98627205663589115566
82034730074532050449
02106093226363591569
32542362883418838518
60967292087678784300
88994243274711727323
07563445636187312182
38289059656071634732
15009745431212748385
83980487394557025807
43329667322614239200
87151127326651308831
78291321235555002243
27817824733124088847
40008658945805845522
34910641569687261886
86780425402165685736
80009700449962043440
21418358020925123840
99387416717771638455
89953122407702615534
40777013210743412149
45320992820785211003
03210933093305886931
96808433712148469055
28136055086391196330
41226439996219543492
74086211757779946652
90803333962784957782
69232746263385008687
39175682608718066902
39046581703535432893
20003970196311509448
98106840655477802416
84951518089525913600
04649669012734217981
05321592151054330517
45952440049430807638
99043857709254259405
36406932408629401801
12646436260593800810
60136622113141786332
18588107192318891640
91795967235390168132
43927032897336305426
93569019227506636578
90497869411335882076
30741187158852568552
44408922175902499471
35621406776054922088
16094577975535140483
41981680827140102549
24390538209079698244
65612723303615477224
52675855472508297429
61765217775948168639
00564531030596615026
31107746182265853173
89687726182928727253
89192876172405147550
27376746098544812960
83762089415305475959
09109798779375817410
18177103608676921276
74610735958020783070
83790373455196039032
79852343234237324531
27876428945587360973
28754604718769480572
95433132886812939501
19780773917727546619
27522883789223142723
75666771342260138630
03176449203289150621
37931461716010992642
45831300855298371697
18948355272873020873
10477458825280955902
01255417580908050007
39574929847167330706
77001452218791801007
47012387686893706181
97458665932271356517
35934769973863006231
78952038576557885876
91376596044137525471
13631192760430962266
31089545330575104794
96135859231067943315
11171735389787349249
27466605805909500118
83892752605225428315
93593752334506555772
02907315760903717396
24669421164585011679
04277484683318935377
30337769532742274076
67302142733608199054
89303951857919744615
81759613973600175881
67823929879323707737
61476563455004296856
65023277846322802619
38626798610757216192
84195948868781290770
72305060929086511505
72911861015377728025
35793172081786051899
13464287134907376166
65830801658106398579
87485810730812931077
27799563583355604726
93452501990739586498
50924124946546599153
06160388858584955273
70086334782714877345
10326360844631564801
33251334700617616265
87820542199568316498
47982557420397888110
88864676653847418688
11769913725761481781
51930291164052732816
15945148656549007055
03604217219620175861
96320562096604127367
76180811095865535141
97665814246998834851
95211382459061088947
43631950075115963093
02224164432640023800";*/
                //db.StoreObject(address);
            }
            Assert.AreEqual(allAddresses.Count, 2);

            db.Close();
        }
    }
}